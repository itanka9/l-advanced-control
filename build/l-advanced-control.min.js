(function () {
'use strict';

L.FlexControl = L.Class.extend({
  options: {
    position: { corner: 'topright', grow: 'y' }
  },

  initialize: function (options) {
    L.Util.setOptions(this, options);
  },

  getPosition: function () {
      return this.options.position
  },

  setPosition: function (position) {
    const map = this._map;

    if (map) {
      map.removeControl(this);
    }

    this.options.position = position;

    if (map) {
      map.addControl(this);
    }

    return this
  },

  getContainer: function () {
    return this._container
  },

  addTo: function (map) {
    this.remove();
    this._map = map;

    var container = this._container = this.onAdd(map),
        pos = this.getPosition(),
        corner = map._controlCorners[pos.corner ? (pos.corner + pos.grow) : pos];

    console.log(map._controlCorners, pos.corner ? (pos.corner + pos.grow) : pos);

    L.DomUtil.addClass(container, 'leaflet-control');

    if ((pos.corner || pos).indexOf('bottom') !== -1) {
      corner.insertBefore(container, corner.firstChild);
    } else {
      corner.appendChild(container);
    }

    return this
  },

  remove: function () {
    if (!this._map) {
      return this
    }

    L.DomUtil.remove(this._container);

    if (this.onRemove) {
      this.onRemove(this._map);
    }

    this._map = null;

    return this
  },

  _refocusOnMap: function (e) {
    // if map exists and event is not a keyboard event
    if (this._map && e && e.screenX > 0 && e.screenY > 0) {
      this._map.getContainer().focus();
    }
  }
});

L.Map.include({
  _initControlPos: function () {
    const corners = this._controlCorners = {},
        l = 'leaflet-',
        container = this._controlContainer =
                L.DomUtil.create('div', l + 'control-container', this._container);

    function createCorner (vSide, hSide, grow) {
      const className = l + vSide + ' ' + l + hSide;
      const classNameX = l + 'grow-x';
      const classNameY = l + 'grow-y';
      const cornerDiv = L.DomUtil.create('div', className, container);

      if (hSide === 'left') {
        corners[vSide + hSide] = corners[vSide + hSide + 'y'] = L.DomUtil.create('div', classNameY, cornerDiv);
        corners[vSide + hSide + 'x'] = L.DomUtil.create('div', classNameX, cornerDiv);
      } else {
        corners[vSide + hSide + 'x'] = L.DomUtil.create('div', classNameX, cornerDiv);
        corners[vSide + hSide] = corners[vSide + hSide + 'y'] = L.DomUtil.create('div', classNameY, cornerDiv);
      }
    }

    createCorner('top', 'left');
    createCorner('top', 'right');
    createCorner('bottom', 'left');
    createCorner('bottom', 'right');
  },

  _clearControlPos: function () {
    for (var i in this._controlCorners) {
      L.DomUtil.remove(this._controlCorners[i]);
    }
    L.DomUtil.remove(this._controlContainer);
    delete this._controlCorners;
    delete this._controlContainer;
  }
});

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibC1hZHZhbmNlZC1jb250cm9sLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiTC5GbGV4Q29udHJvbCA9IEwuQ2xhc3MuZXh0ZW5kKHtcbiAgb3B0aW9uczoge1xuICAgIHBvc2l0aW9uOiB7IGNvcm5lcjogJ3RvcHJpZ2h0JywgZ3JvdzogJ3knIH1cbiAgfSxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpXG4gIH0sXG5cbiAgZ2V0UG9zaXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgfSxcblxuICBzZXRQb3NpdGlvbjogZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5fbWFwXG5cbiAgICBpZiAobWFwKSB7XG4gICAgICBtYXAucmVtb3ZlQ29udHJvbCh0aGlzKVxuICAgIH1cblxuICAgIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9IHBvc2l0aW9uXG5cbiAgICBpZiAobWFwKSB7XG4gICAgICBtYXAuYWRkQ29udHJvbCh0aGlzKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH0sXG5cbiAgZ2V0Q29udGFpbmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lclxuICB9LFxuXG4gIGFkZFRvOiBmdW5jdGlvbiAobWFwKSB7XG4gICAgdGhpcy5yZW1vdmUoKVxuICAgIHRoaXMuX21hcCA9IG1hcFxuXG4gICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lciA9IHRoaXMub25BZGQobWFwKSxcbiAgICAgICAgcG9zID0gdGhpcy5nZXRQb3NpdGlvbigpLFxuICAgICAgICBjb3JuZXIgPSBtYXAuX2NvbnRyb2xDb3JuZXJzW3Bvcy5jb3JuZXIgPyAocG9zLmNvcm5lciArIHBvcy5ncm93KSA6IHBvc11cblxuICAgIGNvbnNvbGUubG9nKG1hcC5fY29udHJvbENvcm5lcnMsIHBvcy5jb3JuZXIgPyAocG9zLmNvcm5lciArIHBvcy5ncm93KSA6IHBvcylcblxuICAgIEwuRG9tVXRpbC5hZGRDbGFzcyhjb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wnKVxuXG4gICAgaWYgKChwb3MuY29ybmVyIHx8IHBvcykuaW5kZXhPZignYm90dG9tJykgIT09IC0xKSB7XG4gICAgICBjb3JuZXIuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgY29ybmVyLmZpcnN0Q2hpbGQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvcm5lci5hcHBlbmRDaGlsZChjb250YWluZXIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX21hcCkge1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICBMLkRvbVV0aWwucmVtb3ZlKHRoaXMuX2NvbnRhaW5lcilcblxuICAgIGlmICh0aGlzLm9uUmVtb3ZlKSB7XG4gICAgICB0aGlzLm9uUmVtb3ZlKHRoaXMuX21hcClcbiAgICB9XG5cbiAgICB0aGlzLl9tYXAgPSBudWxsXG5cbiAgICByZXR1cm4gdGhpc1xuICB9LFxuXG4gIF9yZWZvY3VzT25NYXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgLy8gaWYgbWFwIGV4aXN0cyBhbmQgZXZlbnQgaXMgbm90IGEga2V5Ym9hcmQgZXZlbnRcbiAgICBpZiAodGhpcy5fbWFwICYmIGUgJiYgZS5zY3JlZW5YID4gMCAmJiBlLnNjcmVlblkgPiAwKSB7XG4gICAgICB0aGlzLl9tYXAuZ2V0Q29udGFpbmVyKCkuZm9jdXMoKVxuICAgIH1cbiAgfVxufSlcblxuTC5NYXAuaW5jbHVkZSh7XG4gIF9pbml0Q29udHJvbFBvczogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGNvcm5lcnMgPSB0aGlzLl9jb250cm9sQ29ybmVycyA9IHt9LFxuICAgICAgICBsID0gJ2xlYWZsZXQtJyxcbiAgICAgICAgY29udGFpbmVyID0gdGhpcy5fY29udHJvbENvbnRhaW5lciA9XG4gICAgICAgICAgICAgICAgTC5Eb21VdGlsLmNyZWF0ZSgnZGl2JywgbCArICdjb250cm9sLWNvbnRhaW5lcicsIHRoaXMuX2NvbnRhaW5lcilcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvcm5lciAodlNpZGUsIGhTaWRlLCBncm93KSB7XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSBsICsgdlNpZGUgKyAnICcgKyBsICsgaFNpZGVcbiAgICAgIGNvbnN0IGNsYXNzTmFtZVggPSBsICsgJ2dyb3cteCdcbiAgICAgIGNvbnN0IGNsYXNzTmFtZVkgPSBsICsgJ2dyb3cteSdcbiAgICAgIGNvbnN0IGNvcm5lckRpdiA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsIGNsYXNzTmFtZSwgY29udGFpbmVyKVxuXG4gICAgICBpZiAoaFNpZGUgPT09ICdsZWZ0Jykge1xuICAgICAgICBjb3JuZXJzW3ZTaWRlICsgaFNpZGVdID0gY29ybmVyc1t2U2lkZSArIGhTaWRlICsgJ3knXSA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsIGNsYXNzTmFtZVksIGNvcm5lckRpdilcbiAgICAgICAgY29ybmVyc1t2U2lkZSArIGhTaWRlICsgJ3gnXSA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsIGNsYXNzTmFtZVgsIGNvcm5lckRpdilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvcm5lcnNbdlNpZGUgKyBoU2lkZSArICd4J10gPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCBjbGFzc05hbWVYLCBjb3JuZXJEaXYpXG4gICAgICAgIGNvcm5lcnNbdlNpZGUgKyBoU2lkZV0gPSBjb3JuZXJzW3ZTaWRlICsgaFNpZGUgKyAneSddID0gTC5Eb21VdGlsLmNyZWF0ZSgnZGl2JywgY2xhc3NOYW1lWSwgY29ybmVyRGl2KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZUNvcm5lcigndG9wJywgJ2xlZnQnKVxuICAgIGNyZWF0ZUNvcm5lcigndG9wJywgJ3JpZ2h0JylcbiAgICBjcmVhdGVDb3JuZXIoJ2JvdHRvbScsICdsZWZ0JylcbiAgICBjcmVhdGVDb3JuZXIoJ2JvdHRvbScsICdyaWdodCcpXG4gIH0sXG5cbiAgX2NsZWFyQ29udHJvbFBvczogZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy5fY29udHJvbENvcm5lcnMpIHtcbiAgICAgIEwuRG9tVXRpbC5yZW1vdmUodGhpcy5fY29udHJvbENvcm5lcnNbaV0pXG4gICAgfVxuICAgIEwuRG9tVXRpbC5yZW1vdmUodGhpcy5fY29udHJvbENvbnRhaW5lcilcbiAgICBkZWxldGUgdGhpcy5fY29udHJvbENvcm5lcnNcbiAgICBkZWxldGUgdGhpcy5fY29udHJvbENvbnRhaW5lclxuICB9XG59KSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxDQUFDLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0VBQzdCLE9BQU8sRUFBRTtJQUNQLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRTtHQUM1Qzs7RUFFRCxVQUFVLEVBQUUsVUFBVSxPQUFPLEVBQUU7SUFDN0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBQztHQUNqQzs7RUFFRCxXQUFXLEVBQUUsWUFBWTtNQUNyQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUTtHQUMvQjs7RUFFRCxXQUFXLEVBQUUsVUFBVSxRQUFRLEVBQUU7SUFDL0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUk7O0lBRXJCLElBQUksR0FBRyxFQUFFO01BQ1AsR0FBRyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUM7S0FDeEI7O0lBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsU0FBUTs7SUFFaEMsSUFBSSxHQUFHLEVBQUU7TUFDUCxHQUFHLENBQUMsVUFBVSxD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
